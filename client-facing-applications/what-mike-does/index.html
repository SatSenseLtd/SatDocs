
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.5.2">
    
    
      
        <title>"What Mike does" - SatDocs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.9f9400aa.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#ef5552">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="red" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#what-mike-does" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SatDocs" class="md-header__button md-logo" aria-label="SatDocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SatDocs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              "What Mike does"
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SatDocs" class="md-nav__button md-logo" aria-label="SatDocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SatDocs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        SatSense Documentation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../AWS/" class="md-nav__link">
        Setting up AWS for processing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../daemon/" class="md-nav__link">
        SatDaemon (SQLAlchemy Version)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../dataprocessing/" class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../jira/" class="md-nav__link">
        Jira
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../sftp_user_setup/" class="md-nav__link">
        Sftp user setup
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Client facing applications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Client facing applications" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Client facing applications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../admin/" class="md-nav__link">
        Admin Suite (satadmin)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../demo-portal/" class="md-nav__link">
        Demo portal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../geoserver/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        SatSense Client-Facing Applications Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/" class="md-nav__link">
        Portal/SatShop (satportal)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../satdes/" class="md-nav__link">
        Satdes (Data Extraction Service)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../satdom-scripts/" class="md-nav__link">
        Satdom Scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../satpgi/" class="md-nav__link">
        Postgres Ingester (satpgi)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tileserver-qgis-fiddle/" class="md-nav__link">
        Integrating Tileservers into QGIS (fiddle)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tileservers/" class="md-nav__link">
        Tileservers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../webmisc/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        "What Mike does"
      </a>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_15" type="checkbox" id="__nav_7_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_15">
          Portal
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Portal" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_15">
          <span class="md-nav__icon md-icon"></span>
          Portal
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../portal/portal-overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="what-mike-does">"What Mike does"</h1>
<p>This document contains a list of ad hoc jobs that that need to be taken over.  It also contains high level instructions for each job along with links to other relevant documentation, if applicable.</p>
<h1 id="contents">Contents</h1>
<ul>
<li><a href="#ingest-new-data-into-portal">Ingest new frame into portal</a> - just refers to ingesting data process and not creating a new portal from scratch.</li>
<li><a href="#regenerate-countrywide-srisks-for-api">Regenerate countrywide srisks for API</a></li>
<li><a href="#regenerate-tiles">Regenerate tiles</a> - tiles aka tile overviews, portal geotiffs</li>
<li><a href="#create-new-portal">Create new portal</a> - just release a new portal, this assumes InSAR data already exists.</li>
<li><a href="#add-user-to-staging-portal-portal2-or-portal3">Add user to staging portal, portal2 or portal3</a></li>
<li><a href="#generate-monthly-figures-for-api">Generate monthly figures for API</a></li>
<li><a href="#keep-an-eye-on-sla-for-api">Keep an eye on SLA for API</a></li>
<li><a href="#test-against-api-beforeafter-release">Test against API before/after release</a></li>
<li><a href="#insert-new-dates-into-live-database">Insert new dates into live database</a></li>
<li><a href="#keep-an-eye-on-ssd-storage-on-api-server">Keep an eye on SSD storage on API Server</a></li>
<li><a href="#be-on-hand-if-server-restart-or-database-bounce-required">Be on hand if server/postgres bounce required</a></li>
<li><a href="">Update warm back up insar data</a></li>
<li><a href="">Update warm back up user data</a></li>
</ul>
<h1 id="ingest-new-frame-into-portal">Ingest new frame into portal</h1>
<p>Frequency:</p>
<ul>
<li>Every 1-2 months/when prompted</li>
</ul>
<p>Actions:</p>
<ul>
<li>Create new database (for csk data, historically we've called it <code>london_csk_{today's date}</code>, e.g. <code>london_csk_20200803</code>). Just do this by logging into psql using <code>postgres</code> user and running <code>create database london_csk_...</code>.</li>
<li>Run <code>insar_data_db</code> alembic migrations on this new database. We keep a checked out version of <code>satsense_domain</code> on the api server at <code>/home/centos/Projects/alembic/satsense_domain</code>.  There is a virtual environment in this folder too called <code>venv_alembic</code>.  Don't forget to check <code>alembic.ini</code> in <code>satsense_db_migrations/insar_data_db</code>.  To run the migrations, check current schema is empty using <code>alembic current</code> and then upgrade to most recent schema using <code>alembic upgrade head</code>.</li>
<li>Give correct permissions to users for the database you've created.  For csk datasets, I've been giving <code>staging_pgi</code> full read, write and delete permissions and <code>satsense_ro</code> read permissions.  More info about setting up permissions here: https://satsenseltd.gitlab.io/Documentation/client-facing-applications/database/#2-user-creation-and-permissions</li>
<li><a href="../satpgi/#running-live-instance">Use satpgi</a> to do an initial ingest into the database. Check the config before you run anything.</li>
<li><a href="../satdom-scripts/#running-live-instance">Use satdom scripts</a> to generate the tiles from this database.  Again check config.  Can use <code>satsense_ro</code> user here.</li>
<li>Move tiles to sensible location.  Look in <code>/data/tile_geotiffs</code> (specifically for csk look in <code>/data/tile_geotiffs/staging/vels_hr_asc</code>).  Consider doing both rural/high res or ascending/descending.</li>
<li>Change satshop (or portal3 for csk data) config to use new database and satshop tileserver (or portal3 tileserver for csk data) to use new database and tiles.  Restart portal3 and run httpd reload (reload is a soft restart).  Locations of configuration files are the docs for the <a href="../portal/#live-server-locations">portal</a> and the <a href="../tileservers/#live-server-locations">tileservers</a>.</li>
<li>Check it's rendering something and check it seems reasonable.</li>
</ul>
<h1 id="regenerate-countrywide-srisks-for-api">Regenerate countrywide srisks for api</h1>
<p>Frequency:</p>
<ul>
<li>Every 1-2 months/when prompted</li>
</ul>
<p>Actions:</p>
<ul>
<li>Use the script <code>generate_srisks_tifs.py</code> from the <a href="../satdom-scripts/">satdom scripts</a> to regenerate the entire srisks for the api.</li>
<li>Once generated, we will alter the config of the staging api (at <code>/var/www/api-staging/app_home/config.in</code> - given for convenience but could have been found in the <a href="../api/">api docs</a>).  In this staging api config, change the value <code>all_srisk_geotiff_path</code> under the section <code>srisk</code> to the full path of the new srisk file.  The current value is probably somewhere on the ssd (i.e. starting with <code>/data</code>), but it is fine to test the new srisk file from the rust disks - it just might be a little slower. You may be wondering what that option <code>precalculated_directory_path</code> does - this was used when we were just serving "spatial srisks" from four different files - we now serve all srisks from one file.</li>
<li>Restart the staging api to load the new config.  i.e. run <code>sudo systemctl stop apistaging</code> followed by <code>sudo systemctl start apistaging</code>.</li>
<li>Run the <a href="https://gitlab.com/SatSenseLtd/satsense-api/-/tree/master/tests/qa_tests">qa tests</a> against the live api (which uses the old srisk geotiff) and the staging api (which uses the new srisk geotiff due to the previous steps).  You might want to keep an eye on response times during pinging the live api, or run outside of hours.</li>
<li>Compare the results from the previous step.  Would usually do this by comparing the proportions of red/amber/green or look at which polygons have changed status.</li>
<li>If there is no big change then you can probably roll out the release without too much hassle.  Make groundsure aware (via list of emails I forwarded) that you plan to update some data and offer them the chance to test it against the "test api" i.e. <code>api.test.satsense.com</code>. </li>
<li>If there is a big change in the results, best to consult Karsten with what to do.  May want to highlight change to groundsure, again liaise with Karsten about who best to approach at groundsure regarding this.</li>
<li>Once release is scheduled, update the test and live configs and restart each app.  The config paths/how to restart each app can be found in the <a href="../api/">api docs</a>. The restart of each app might need to happen on different days if groundsure want to test against the test api.</li>
</ul>
<h1 id="regenerate-tiles">Regenerate tiles</h1>
<p>TODO</p>
<h1 id="create-new-portal">Create new portal</h1>
<p>TODO</p>
<h1 id="add-user-to-staging-portal-portal2-or-portal3">Add user to staging portal, portal2 or portal3</h1>
<p>TODO</p>
<h1 id="keep-an-eye-on-sla-for-api">Keep an eye on SLA for API</h1>
<p>TODO</p>
<h1 id="test-against-api-beforeafter-release">Test against API before/after release</h1>
<p>TODO</p>
<h1 id="insert-new-dates-into-live-database">Insert new dates into live database</h1>
<p>Frequency:</p>
<ul>
<li>As often as possible</li>
</ul>
<p>Actions:</p>
<ul>
<li>This refers to running the <a href="../satpgi/#updating-data-temporally">satpgi insert-dates script</a>.  Before running this, have a look what other satpgi are happening - check <code>satpgi</code> screens on each vm.  Tend to only run two satpgi scripts at the same time (one for each vm).  </li>
<li>Wait until after 5pm on a weekday or anytime at weekend.</li>
<li>Find a suitable frame to update.  We manually keep a list of how up-to-date frames are in the database. Find that <a href="https://satsense2-my.sharepoint.com/:x:/g/personal/michael_west_satsense_com/EagSqosh2KlAr_-_Fni5lHIBl0XTt4Dlg9ZIY9lAfEyFZA?e=b4hvSc">here</a>.  Also sometimes good to check if there is any current processing on the frame in question.  To do that, replace <code>&lt;frame id&gt;</code> with a frame id in the following url:  </li>
</ul>
<p><code>https://admin.satsense.com/processing_controller/frame/&lt;frame id&gt;</code></p>
<p>and see if there are any <code>Running Dates</code> on that page.
- Can run satpgi insert dates as detailed <a href="../satpgi/#running-live-instance">here</a>.  Always check config before running to make sure you're inserting dates into the right place!
- For convenience, an example insert-date script: </p>
<p><code>python main.py insert-dates -i 103A_03733_131113 --hr-file /rust2/workspace/frames/103A_03733_131113/RapidSAR/103A_03733_131113-vel.h5 --rural-file /rust2/workspace/frames/103A_03733_131113/RapidSAR/103A_03733_131113-rural-vel.h5</code></p>
<h1 id="keep-an-eye-on-ssd-storage-on-api-server">Keep an eye on SSD storage on API Server</h1>
<p>Frequency:</p>
<ul>
<li>Every so often, more frequently if higher than 85% or so.  </li>
</ul>
<p>Actions:</p>
<ul>
<li>Log onto api server and run <code>df -h</code> and look at <code>/data</code> usage.</li>
<li>The biggest consumer of data is <a href="#insert-new-dates-into-live-database">inserting new dates into the database</a>, but even this doesn't eat too much database too quickly.  Really start to worry if less than 150-200GB remaining - then probably worth expanding.</li>
<li>Before expanding, delete unnecessary databases/files then if still required talk to Matt (it is expensive) and if he's happy give Seth at unipart an email.</li>
<li>The expansion will require a <a href="#be-on-hand-if-server-restart-or-database-bounce-required">server restart</a>.</li>
</ul>
<h1 id="be-on-hand-if-server-restart-or-database-bounce-required">Be on hand if server restart or database bounce required</h1>
<p>Frequency:</p>
<ul>
<li>When required</li>
</ul>
<p>Actions:</p>
<ul>
<li>If planned and it affects API, best to let groundsure know, even if maintenance would be out of hours.</li>
<li>"Server restart" usually goes completely fine and services don't need looking at.</li>
<li>"Database bounce" can affect some of the application transaction handling and those applications need restarting to rectify.  We list a table of services, how you check they are fine and how to restart if they're not.</li>
</ul>
<table>
<thead>
<tr>
<th>Service Name</th>
<th>How to check it's fine</th>
<th>How to restart service</th>
</tr>
</thead>
<tbody>
<tr>
<td>satshop</td>
<td>Log into satshop.satsense.com and retrieve a time series by clicking point</td>
<td><code>systemctl stop satshop</code> <br> <code>systemctl start satshop</code></td>
</tr>
<tr>
<td>staging portal</td>
<td>Log into portal.staging.satsense.com and retrieve a time series by clicking point</td>
<td><code>systemctl stop portalstaging</code> <br> <code>systemctl start portalstaging</code></td>
</tr>
<tr>
<td>portal2</td>
<td>Log into portal2.satsense.com and retrieve a time series by clicking point</td>
<td><code>systemctl stop portal2</code> <br> <code>systemctl start portal2</code></td>
</tr>
<tr>
<td>portal3</td>
<td>Log into portal3.satsense.com and retrieve a time series by clicking point</td>
<td><code>systemctl stop portal3</code> <br> <code>systemctl start portal3</code></td>
</tr>
<tr>
<td>admin</td>
<td>Log into admin.satsense.com</td>
<td><code>systemctl stop adminlive</code> <br> <code>systemctl start adminlive</code></td>
</tr>
<tr>
<td>adminstaging</td>
<td>Log into admin.staging.satsense.com</td>
<td><code>systemctl stop adminstaging</code> <br> <code>systemctl start adminstaging</code></td>
</tr>
<tr>
<td>admin2</td>
<td>Log into portal2.satsense.com/admin</td>
<td><code>systemctl stop admin2</code> <br> <code>systemctl start admin2</code></td>
</tr>
<tr>
<td>admin3</td>
<td>Log into portal3.satsense.com/admin</td>
<td><code>systemctl stop admin3</code> <br> <code>systemctl start admin3</code></td>
</tr>
<tr>
<td>All tile servers</td>
<td>Log into relevant portal and check tiles rendered</td>
<td><code>systemctl reload httpd</code></td>
</tr>
<tr>
<td>api live</td>
<td>Check new relic status/ping api/check logs for errors</td>
<td><code>systemctl stop apilive</code> <br> <code>systemctl start apilive</code></td>
</tr>
<tr>
<td>api test</td>
<td>Check new relic status/ping api/check logs for errors</td>
<td><code>systemctl stop apitest</code> <br> <code>systemctl start apitest</code></td>
</tr>
<tr>
<td>api staging</td>
<td>Ping api/check logs for errors</td>
<td><code>systemctl stop apistaging</code> <br> <code>systemctl start apistaging</code></td>
</tr>
<tr>
<td>api live celery process</td>
<td>Check celery worker logs located at <code>/var/www/api-live/celery/apilivew1-1.log</code> and <code>/var/www/api-live/celery/apilivew1-2.log</code> - make sure there are recent "succeeded" messages</td>
<td><code>systemctl stop apilivecelery</code> <br> <code>systemctl start apilivecelery</code></td>
</tr>
<tr>
<td>api test celery process</td>
<td>Check celery worker logs located at <code>/var/www/api-test/celery/apitestw1-1.log</code> - make sure there are recent "succeeded" messages</td>
<td><code>systemctl stop apitestcelery</code> <br> <code>systemctl start apitestcelery</code></td>
</tr>
<tr>
<td>api staging celery process</td>
<td>Check celery worker logs located at <code>/var/www/api-staging/celery/apistagingw1-1.log</code> - make sure there are recent "succeeded" messages</td>
<td><code>systemctl stop apistagingcelery</code> <br> <code>systemctl start apistagingcelery</code></td>
</tr>
</tbody>
</table>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../webmisc/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Overview
            </div>
          </div>
        </a>
      
      
        
        <a href="../portal/portal-overview/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.39f04ddb.min.js"></script>
      
    
  </body>
</html>